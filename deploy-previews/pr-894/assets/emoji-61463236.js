import{g as W,t as be,h as G,v as pe,w as he,a6 as I,D as ke}from"./emoji_text_wrapper-a6cf0407-e5bffae5.js";import{Q as dt,j as mt,a7 as ft,a8 as vt,a9 as bt,aa as pt,ab as ht,ac as kt,ad as gt,ae as jt,af as yt,ag as _t,ah as St,ai as Tt,aj as wt,ak as Et,al as Ft,am as Lt,an as Rt,ao as Ct,ap as At,aq as It,ar as $t}from"./emoji_text_wrapper-a6cf0407-e5bffae5.js";import{r as j,h as N,v as _,x as S,y as E,G as U,H as T,J as x,t as ge,w as q,B as V,F as B,z as M,A as je,a7 as te,o as le,O as ye,a6 as J,aj as _e,D as z,M as Q,N as X,I as Y,E as oe,ak as Se,C as ae}from"./framework-8b169d2a.js";const Te={class:"d-emoji-picker__search d-emoji-picker__alignment"},we=["onKeydown"],Ee={__name:"emoji_search",props:{searchPlaceholderLabel:{type:String,required:!0},modelValue:{type:String,default:""}},emits:["update:modelValue","focus-emoji-selector","focus-tabset","select-first-emoji"],setup(s,{expose:v,emit:m}){const a=j(null);function c(){m("update:modelValue",""),p()}function p(){a.value.focus()}return le(()=>{p()}),v({focusSearchInput:p}),(k,h)=>(_(),S("div",Te,[U(he,{ref_key:"searchInput",ref:a,placeholder:s.searchPlaceholderLabel,"model-value":s.modelValue,"onUpdate:modelValue":h[0]||(h[0]=u=>k.$emit("update:modelValue",u)),onKeydown:[h[1]||(h[1]=x(u=>k.$emit("focus-tabset"),["up"])),h[2]||(h[2]=x(te(u=>k.$emit("focus-emoji-selector"),["prevent"]),["down"])),h[3]||(h[3]=x(u=>k.$emit("select-first-emoji"),["enter"]))]},ye({leftIcon:V(()=>[U(G,{name:"search"})]),_:2},[s.modelValue.length>0?{name:"rightIcon",fn:V(()=>[E("button",{class:"d-emoji-picker__search-button",onClick:c,onKeydown:x(c,["enter"])},[U(G,{name:"close"})],40,we)]),key:"0"}:void 0]),1032,["placeholder","model-value"])]))}},Fe=W(Ee,[["__scopeId","data-v-2576719b"]]),Le={class:"d-emoji-picker__tabset"},Re={__name:"emoji_tabset",props:{showRecentlyUsedTab:{type:Boolean,default:!1},scrollIntoTab:{type:Number,required:!0},isScrolling:{type:Boolean,default:!1},emojiFilter:{type:String,default:""},tabsetLabels:{type:Array,required:!0}},emits:["selected-tabset","focus-search-input"],setup(s,{expose:v,emit:m}){const a=s,c=[{label:"Recently used",icon:"clock"},{label:"Smileyâ€™s and people",icon:"satisfied"},{label:"Nature",icon:"living-thing"},{label:"Food",icon:"food"},{label:"Activity",icon:"object"},{label:"Travel",icon:"transportation"},{label:"Objects",icon:"lightbulb"},{label:"Symbols",icon:"heart"},{label:"Flags",icon:"flag"}],p=N(()=>(a.showRecentlyUsedTab?c:c.slice(1)).map((e,t)=>({...e,label:a.tabsetLabels[t],id:(t+1).toString(),panelId:(t+1).toString()}))),k=N(()=>a.emojiFilter.length>0),h=j("1"),{isScrolling:u}=ge(a),$=j([]);q(()=>a.scrollIntoTab,()=>{!u.value&&!k.value&&(h.value=(a.scrollIntoTab+1).toString())}),q(k,()=>{k.value&&(h.value=null)});function R(e){u.value||(h.value=e),m("selected-tabset",e)}function d(e){$.value.push(e.$el)}function C(){$.value[0].focus()}function b(e,t){e.key==="Enter"&&(R(t),$.value[t-1].blur()),e.key==="Tab"&&(e.preventDefault(),m("focus-search-input")),e.key==="ArrowDown"&&m("focus-search-input")}return v({focusTabset:C}),(e,t)=>(_(),S("div",Le,[U(pe,{"tab-list-class":"d-emoji-picker__tabset-list",selected:h.value},{tabs:V(()=>[(_(!0),S(B,null,M(T(p),(i,w)=>(_(),je(be,{id:i.id,ref_for:!0,ref:y=>{y&&d(y)},key:i.id,"panel-id":i.panelId,label:i.label,"aria-controls":"d-emoji-picker-list",tabindex:w+1,onClickCapture:te(y=>R(i.id),["stop"]),onKeydown:y=>b(y,i.id)},{default:V(()=>[U(G,{size:"400",name:i.icon},null,8,["name"])]),_:2},1032,["id","panel-id","label","tabindex","onClickCapture","onKeydown"]))),128))]),_:1},8,["selected"])]))}},H="https://static.dialpadcdn.com/joypixels/png/unicode/32/",F=9;function Ce(s){const v=j([]),m=j([]),a=j(!1),c=j(!0);function p(e,t=!1){c.value=t,s("highlighted-emoji",e)}function k(e,t,i){v.value[t]||(v.value[t]=[]),v.value[t][i]=e}function h(e,t){m.value[t]=e}function u(e,t){var i,w,y;const K=a.value?(i=m.value)==null?void 0:i[t]:(y=(w=v.value)==null?void 0:w[e])==null?void 0:y[t];return K?(K.focus(),!0):!1}function $(e,t){u(e,t-1)||(v.value[e-1]?u(e-1,v.value[e-1].length-1):u(v.value.length-1,v.value[v.value.length-1].length-1))}function R(e,t){u(e,t+1)||u(e+1,0)||u(0,0)}function d(e,t){u(0,t-1)||u(0,m.value.length-1)}function C(e,t){u(0,t+1)||u(0,0)}function b(e,t,i){a.value?e==="left"?d(t,i):e==="right"&&C(t,i):e==="left"?$(t,i):e==="right"&&R(t,i)}return{emojiRefs:v,emojiFilteredRefs:m,isFiltering:a,hoverFirstEmoji:c,setEmojiRef:k,setFilteredRef:h,hoverEmoji:p,focusEmoji:u,handleHorizontalNavigation:b}}const Ae={class:"d-emoji-picker__selector"},Ie={key:0,class:"d-emoji-picker__search-label d-emoji-picker__alignment"},$e={key:0},De={class:"d-emoji-picker__tab"},Ue=["aria-label","onClick","onFocusin","onMouseover","onKeydown"],Ke=["alt","aria-label","title","src"],xe={key:2,class:"d-emoji-picker__alignment"},qe={class:"d-emoji-picker__tab","data-qa":"filtered-emojis"},Ne=["aria-label","onClick","onFocusin","onMouseover","onKeydown"],Ve=["alt","aria-label","title","src"],Be={__name:"emoji_selector",props:{emojiFilter:{type:String,default:""},skinTone:{type:String,required:!0},tabsetLabels:{type:Array,required:!0},selectedTabset:{type:Object,required:!0},searchResultsLabel:{type:String,required:!0},searchNoResultsLabel:{type:String,required:!0},recentlyUsedEmojis:{type:Array,default:()=>[]}},emits:["highlighted-emoji","selected-emoji","scroll-into-tab","is-scrolling","focus-skin-selector","focus-search-input"],setup(s,{expose:v,emit:m}){const a=s,{emojiRefs:c,emojiFilteredRefs:p,isFiltering:k,hoverFirstEmoji:h,setEmojiRef:u,setFilteredRef:$,hoverEmoji:R,focusEmoji:d,handleHorizontalNavigation:C}=Ce(m),b=j(null),e=j(null),t=j(null),i=["Recently used","People","Nature","Food","Activity","Travel","Objects","Symbols","Flags"],w=N(()=>a.recentlyUsedEmojis.length?a.tabsetLabels.map(l=>({label:l,ref:j(null)})):a.tabsetLabels.slice(1).map(l=>({label:l,ref:j(null)}))),y=j(w.value[0].label),K=N(()=>a.recentlyUsedEmojis.length?i:i.slice(1)),O=j([]),Z=N(()=>[...I[`People${a.skinTone}`],...I.Nature,...I.Food,...I[`Activity${a.skinTone}`],...I.Travel,...I[`Objects${a.skinTone}`],...I.Symbols,...I.Flags]),se=ne(()=>{p.value=[],ee()});q(Z,()=>{ee()},{immediate:!0}),q(()=>a.recentlyUsedEmojis,()=>{I["Recently used"]=a.recentlyUsedEmojis},{immediate:!0}),q(()=>a.emojiFilter,()=>{ce(),a.emojiFilter?k.value=!0:(k.value=!1,m("highlighted-emoji",null)),se()}),q(()=>a.selectedTabset,l=>{P(l.tabId)},{deep:!0});function ee(){const l=a.emojiFilter.toLowerCase();O.value=Z.value.filter(o=>{const r=o.name.toLowerCase().includes(l),f=o.keywords.some(n=>n.toLowerCase().includes(l));return r||f}),J(()=>{l&&R(O.value[0],!0)})}function ne(l,o=300){let r;return(...f)=>{clearTimeout(r),r=setTimeout(()=>l(...f),o)}}function ie(l){return`${H+l}.png`}function re(l){l.target.parentNode.style.display="none"}function P(l,o=!0){const r=w.value[l-1].ref.value[0];J(()=>{const f=e.value,n=l==="1"?0:r.offsetTop-20;let L=!0,g=f.scrollTop;m("is-scrolling",!0),f.addEventListener("scroll",()=>{if(L){const A=f.scrollTop;(g<A&&A>=n||g>A&&A<=n)&&(L=!1,m("is-scrolling",!1)),g=A}}),f.scrollTop=n,o&&d(l-1,0)})}function ce(){const l=e.value;l.scrollTop=0}function ue(){t.value=new IntersectionObserver(l=>{l.forEach(o=>{var r,f,n,L,g;const{target:A}=o,D=parseInt(A.dataset.index);o.isIntersecting&&A.offsetTop<=b.value.offsetTop+50?(y.value=((r=w.value[D-1])==null?void 0:r.label)??((f=w.value[0])==null?void 0:f.label),m("scroll-into-tab",D-1)):o.boundingClientRect.bottom<=((n=b.value)==null?void 0:n.getBoundingClientRect().bottom)?(m("scroll-into-tab",D),y.value=(L=w.value[D])==null?void 0:L.label):D===1&&(m("scroll-into-tab",D),y.value=(g=w.value[0])==null?void 0:g.label)})}),t.value.observe(b.value),Array.from(e.value.children).forEach((l,o)=>{t.value.observe(l),l.dataset.index=o})}const de=(l,o,r)=>{var f;if(l.preventDefault(),h.value=!1,l.key==="ArrowUp"){const n=o%F;if(!d(0,o-F)){const L=p.value.length-p.value.length%F+n;d(0,L),d(0,L)||d(0,p.value.length-1)}}if(l.key==="ArrowDown"&&!d(0,o+F)){const n=o%F;(f=p.value)!=null&&f[o+(F-n)]?d(0,p.value.length-1):d(0,n)}l.key==="ArrowLeft"&&C("left",0,o),l.key==="ArrowRight"&&C("right",0,o),l.key==="Tab"&&m("focus-skin-selector"),l.key==="Enter"&&m("selected-emoji",r)},me=(l,o,r,f)=>{var n,L;if(l.preventDefault(),l.key==="ArrowUp"){const g=r%F;if(o===0){const A=F-c.value[c.value.length-1].length%F,D=c.value[c.value.length-1].length+A-(F-g);d(c.value.length-1,D)||d(c.value.length-1,c.value[c.value.length-1].length-1);return}if(!d(o,r-F)){const A=o-1<0?0:o-1,D=c.value[A].length,ve=D-D%F+g;d(A,ve)||d(o-1,c.value[o-1].length-1)}}if(l.key==="ArrowDown"&&!d(o,r+F)){const g=r%F;(L=(n=c.value)==null?void 0:n[o])!=null&&L[r+(F-g)]?d(o,c.value[o].length-1):d(o+1,g)||d(0,g)||d(0,c.value[0].length-1)}l.key==="ArrowLeft"&&C("left",o,r),l.key==="ArrowRight"&&C("right",o,r),l.key==="Tab"&&(d(o+1,0)?P(o+1+1,!1):m("focus-skin-selector")),l.key==="Tab"&&l.shiftKey&&(d(o,0)&&o>0?P(o,!0):(P(1,!1),m("focus-search-input"))),l.key==="Enter"&&m("selected-emoji",f)};function fe(){d(0,0)}return le(()=>{ue()}),_e(()=>{t.value.disconnect()}),v({focusEmojiSelector:fe}),(l,o)=>(_(),S("div",Ae,[E("div",{id:"d-emoji-picker-list",ref_key:"listRef",ref:e,class:"d-emoji-picker__list"},[s.emojiFilter?(_(),S("p",Ie,z(O.value.length>0?s.searchResultsLabel:s.searchNoResultsLabel),1)):(_(),S("div",{key:1,ref_key:"tabCategoryRef",ref:b,class:"d-emoji-picker__category d-emoji-picker__alignment"},[E("p",null,z(y.value),1)],512)),(_(!0),S(B,null,M(T(w),(r,f)=>Q((_(),S("div",{key:f,ref_for:!0,ref:r.ref,class:"d-emoji-picker__alignment"},[f?(_(),S("p",$e,z(r.label),1)):Y("",!0),E("div",De,[(_(!0),S(B,null,M(T(I)[T(K)[f]+s.skinTone]?T(I)[T(K)[f]+s.skinTone]:T(I)[T(K)[f]],(n,L)=>(_(),S("button",{key:n.shortname,ref_for:!0,ref:g=>{g&&T(u)(g,f,L)},type:"button","aria-label":n.name,onClick:g=>l.$emit("selected-emoji",n),onFocusin:g=>l.$emit("highlighted-emoji",n),onFocusout:o[0]||(o[0]=g=>l.$emit("highlighted-emoji",null)),onMouseover:g=>l.$emit("highlighted-emoji",n),onMouseleave:o[1]||(o[1]=g=>l.$emit("highlighted-emoji",null)),onKeydown:g=>me(g,f,L,n)},[E("img",{class:"d-icon d-icon--size-500",alt:n.name,"aria-label":n.name,title:n.name,src:ie(n.unicode_character),onError:re},null,40,Ke)],40,Ue))),128))])])),[[X,!s.emojiFilter]])),128)),s.emojiFilter?(_(),S("div",xe,[E("div",qe,[(_(!0),S(B,null,M(O.value,(r,f)=>(_(),S("button",{key:r.shortname,ref_for:!0,ref:n=>{n&&T($)(n,f)},type:"button","aria-label":r.name,class:oe({"hover-emoji":f===0&&T(h)}),onClick:n=>l.$emit("selected-emoji",r),onFocusin:n=>l.$emit("highlighted-emoji",r),onFocusout:o[2]||(o[2]=n=>l.$emit("highlighted-emoji",null)),onMouseover:n=>T(R)(r),onMouseleave:o[3]||(o[3]=n=>T(R)(null)),onKeydown:n=>de(n,f,r)},[E("img",{class:"d-icon d-icon--size-500",alt:r.name,"aria-label":r.name,title:r.name,src:`${T(H)+r.unicode_character}.png`},null,8,Ve)],42,Ne))),128))])])):Y("",!0)],512)]))}},Me=W(Be,[["__scopeId","data-v-b604e646"]]),ze={"data-qa":"skin-selector"},He={class:"d-emoji-picker__skin-list"},Oe=["onKeydown","onClick"],Pe=["alt","aria-label","title","src"],Je={class:"d-emoji-picker__skin-selected"},We=["aria-label"],Ge=["alt","aria-label","title","src"],Qe={__name:"emoji_skin_selector",props:{skinTone:{type:String,required:!0},isHovering:{type:Boolean,default:!1},skinSelectorButtonTooltipLabel:{type:String,required:!0}},emits:["skin-tone","focus-tabset"],setup(s,{expose:v,emit:m}){const a=s,c=[{name:":wave_tone1:",unicode_output:"1f44b-1f3fb",skinTone:"Light",skinCode:"_tone1"},{name:":wave_tone2:",unicode_output:"1f44b-1f3fc",skinTone:"MediumLight",skinCode:"_tone2"},{name:":wave_tone3:",unicode_output:"1f44b-1f3fd",skinTone:"Medium",skinCode:"_tone3"},{name:":wave_tone4:",unicode_output:"1f44b-1f3fe",skinTone:"MediumDark",skinCode:"_tone4"},{name:":wave_tone5:",unicode_output:"1f44b-1f3ff",skinTone:"Dark",skinCode:"_tone5"},{name:":wave:",unicode_output:"1f44b",skinTone:"Default",skinCode:""}],p=j(c.find(e=>e.skinTone===a.skinTone)),k=j(!1),h=j(null),u=j([]);Se(()=>a.isHovering&&(k.value=!1));function $(e){u.value.push(e)}function R(){h.value.focus()}function d(e){p.value=e,k.value=!1,m("skin-tone",e.skinTone),J(()=>R())}const C=(e,t,i)=>{var w,y,K;e.preventDefault(),e.key==="ArrowLeft"&&(i===0&&((w=u.value[u.value.length-1])==null||w.focus()),(y=u.value[i-1])==null||y.focus()),e.key==="ArrowRight"&&((K=u.value[i+1])==null||K.focus()),e.key==="Enter"&&(t?d(t):b()),e.key==="Tab"&&m("focus-tabset")};function b(){k.value=!k.value,J(()=>u.value[0].focus())}return v({focusSkinSelector:R}),(e,t)=>(_(),S("div",ze,[Q(E("div",He,[(_(),S(B,null,M(c,(i,w)=>E("button",{ref_for:!0,ref:y=>{y&&$(y)},key:i.name,class:oe({selected:p.value.skinCode===i.skinCode}),onKeydown:y=>C(y,i,w),onClick:y=>d(i)},[E("img",{class:"d-icon d-icon--size-500",alt:i.name,"aria-label":i.name,title:i.name,src:`${T(H)+i.unicode_output}.png`},null,8,Pe)],42,Oe)),64))],512),[[X,k.value]]),Q(E("div",Je,[U(ke,{placement:"top-end"},{anchor:V(()=>[E("button",{ref_key:"skinSelectorRef",ref:h,"aria-label":s.skinSelectorButtonTooltipLabel,onClick:b,onKeydown:t[0]||(t[0]=i=>C(i))},[E("img",{class:"d-icon d-icon--size-500",alt:p.value.name,"aria-label":p.value.name,title:p.value.name,src:`${T(H)+p.value.unicode_output}.png`},null,8,Ge)],40,We)]),default:V(()=>[ae(z(s.skinSelectorButtonTooltipLabel)+" ",1)]),_:1})],512),[[X,!k.value]])]))}},Xe=W(Qe,[["__scopeId","data-v-58a153f4"]]),Ye={class:"d-emoji-picker__data"},Ze=["alt","aria-label","title","src"],et={__name:"emoji_description",props:{emoji:{type:Object,default:null}},setup(s){return(v,m)=>{var a;return _(),S("div",Ye,[s.emoji?(_(),S("img",{key:0,class:"d-icon d-icon--size-500",alt:s.emoji.name,"aria-label":s.emoji.name,title:s.emoji.name,src:`${T(H)+s.emoji.unicode_character}.png`},null,8,Ze)):Y("",!0),ae(" "+z((a=s.emoji)==null?void 0:a.name),1)])}}},tt=W(et,[["__scopeId","data-v-48c61881"]]),lt={class:"d-emoji-picker"},ot={class:"d-emoji-picker--header"},at={class:"d-emoji-picker--body"},st={class:"d-emoji-picker--footer"},rt={__name:"emoji_picker",props:{recentlyUsedEmojis:{type:Array,default:()=>[]},searchPlaceholderLabel:{type:String,required:!0},searchResultsLabel:{type:String,required:!0},searchNoResultsLabel:{type:String,required:!0},tabSetLabels:{type:Array,required:!0},skinTone:{type:String,default:"Default"},skinSelectorButtonTooltipLabel:{type:String,required:!0}},emits:["selected-emoji","skin-tone","close"],setup(s,{emit:v}){const m=s,a=j(""),c=j(null),p=j({}),k=j(0),h=j(!1),u=N(()=>m.recentlyUsedEmojis.length>0);function $(b){a.value="",p.value=b,p.value={...p.value,tabId:b}}function R(b){k.value=b}function d(b){h.value=b}function C(b){c.value=b}return(b,e)=>(_(),S("div",lt,[E("div",ot,[U(Re,{ref:"tabsetRef","emoji-filter":a.value,"show-recently-used-tab":T(u),"scroll-into-tab":k.value,"tabset-labels":s.tabSetLabels,"is-scrolling":h.value,onFocusSearchInput:e[0]||(e[0]=t=>b.$refs.searchInputRef.focusSearchInput()),onSelectedTabset:$,onKeydown:e[1]||(e[1]=x(t=>v("close"),["esc"]))},null,8,["emoji-filter","show-recently-used-tab","scroll-into-tab","tabset-labels","is-scrolling"])]),E("div",at,[U(Fe,{ref:"searchInputRef",modelValue:a.value,"onUpdate:modelValue":e[2]||(e[2]=t=>a.value=t),"search-placeholder-label":s.searchPlaceholderLabel,onSelectFirstEmoji:e[3]||(e[3]=t=>v("selected-emoji",c.value)),onFocusTabset:e[4]||(e[4]=t=>b.$refs.tabsetRef.focusTabset()),onFocusEmojiSelector:e[5]||(e[5]=t=>b.$refs.emojiSelectorRef.focusEmojiSelector()),onKeydown:e[6]||(e[6]=x(t=>v("close"),["esc"]))},null,8,["modelValue","search-placeholder-label"]),U(Me,{ref:"emojiSelectorRef","emoji-filter":a.value,"skin-tone":s.skinTone,"tabset-labels":s.tabSetLabels,"search-results-label":s.searchResultsLabel,"search-no-results-label":s.searchNoResultsLabel,"recently-used-emojis":s.recentlyUsedEmojis,"selected-tabset":p.value,onScrollIntoTab:R,onIsScrolling:d,onHighlightedEmoji:C,onSelectedEmoji:e[7]||(e[7]=t=>v("selected-emoji",t)),onFocusSkinSelector:e[8]||(e[8]=t=>b.$refs.skinSelectorRef.focusSkinSelector()),onFocusSearchInput:e[9]||(e[9]=t=>b.$refs.searchInputRef.focusSearchInput()),onKeydown:e[10]||(e[10]=x(t=>v("close"),["esc"]))},null,8,["emoji-filter","skin-tone","tabset-labels","search-results-label","search-no-results-label","recently-used-emojis","selected-tabset"])]),E("div",st,[U(tt,{emoji:c.value},null,8,["emoji"]),U(Xe,{ref:"skinSelectorRef","is-hovering":!!c.value,"skin-selector-button-tooltip-label":s.skinSelectorButtonTooltipLabel,"skin-tone":s.skinTone,onSkinTone:e[11]||(e[11]=t=>v("skin-tone",t)),onFocusTabset:e[12]||(e[12]=t=>b.$refs.tabsetRef.focusTabset()),onKeydown:e[13]||(e[13]=x(t=>v("close"),["esc"]))},null,8,["is-hovering","skin-selector-button-tooltip-label","skin-tone"])])]))}};export{dt as DtEmoji,rt as DtEmojiPicker,mt as DtEmojiTextWrapper,ft as codeToEmojiData,vt as customEmojiAssetUrl,bt as defaultEmojiAssetUrl,pt as emojiFileExtensionLarge,ht as emojiFileExtensionSmall,kt as emojiImageUrlLarge,gt as emojiImageUrlSmall,jt as emojiJson,yt as emojiVersion,_t as filterValidShortCodes,St as findEmojis,Tt as findShortCodes,wt as getEmojiData,Et as setCustomEmojiJson,Ft as setCustomEmojiUrl,Lt as setEmojiAssetUrlLarge,Rt as setEmojiAssetUrlSmall,Ct as shortcodeToEmojiData,At as stringToUnicode,It as unicodeToString,$t as validateCustomEmojiJson};
