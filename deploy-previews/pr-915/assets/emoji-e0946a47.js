import{X as G,D as be,x as X,C as pe,H as he,a7 as $,V as ke}from"./emoji_text_wrapper-6b288de8-12373f3a.js";import{s as dt,q as mt,a8 as ft,a9 as vt,aa as bt,ab as pt,ac as ht,ad as kt,ae as gt,af as jt,ag as yt,ah as _t,ai as Tt,aj as St,ak as wt,al as Et,am as Ft,an as Ct,ao as Lt,ap as Rt,aq as It,ar as $t,as as Dt}from"./emoji_text_wrapper-6b288de8-12373f3a.js";import{r as j,k as K,x as T,y as E,G as U,N as S,I as q,t as ge,w as N,v as _,B as V,F as B,z as M,o as te,O as je,a7 as le,A as ye,a6 as J,aj as _e,D as z,L as W,M as Q,H as Y,E as oe,ak as Te,C as ae}from"./framework-49886119.js";const Se={class:"d-emoji-picker__search d-emoji-picker__alignment"},we=["onKeydown"],Ee={__name:"emoji_search",props:{searchPlaceholderLabel:{type:String,required:!0},modelValue:{type:String,default:""}},emits:["update:modelValue","focus-emoji-selector","focus-tabset","select-first-emoji"],setup(n,{expose:v,emit:m}){const a=j(null);function c(){m("update:modelValue",""),p()}function p(){a.value.focus()}return te(()=>{p()}),v({focusSearchInput:p}),(k,h)=>(_(),T("div",Se,[U(pe,{id:"searchInput",ref_key:"searchInput",ref:a,placeholder:n.searchPlaceholderLabel,"model-value":n.modelValue,"onUpdate:modelValue":h[0]||(h[0]=u=>k.$emit("update:modelValue",u)),onKeydown:[h[1]||(h[1]=q(u=>k.$emit("focus-tabset"),["up"])),h[2]||(h[2]=q(le(u=>k.$emit("focus-emoji-selector"),["prevent"]),["down"])),h[3]||(h[3]=q(u=>k.$emit("select-first-emoji"),["enter"]))]},je({leftIcon:V(()=>[U(X,{name:"search"})]),_:2},[n.modelValue.length>0?{name:"rightIcon",fn:V(()=>[E("button",{class:"d-emoji-picker__search-button",onClick:c,onKeydown:q(c,["enter"])},[U(X,{name:"close"})],40,we)]),key:"0"}:void 0]),1032,["placeholder","model-value"])]))}},Fe=G(Ee,[["__scopeId","data-v-640002c1"]]),Ce={class:"d-emoji-picker__tabset"},Le={__name:"emoji_tabset",props:{showRecentlyUsedTab:{type:Boolean,default:!1},scrollIntoTab:{type:Number,required:!0},isScrolling:{type:Boolean,default:!1},emojiFilter:{type:String,default:""},tabsetLabels:{type:Array,required:!0}},emits:["selected-tabset","focus-search-input"],setup(n,{expose:v,emit:m}){const a=n,c=[{label:"Recently used",icon:"clock"},{label:"Smileyâ€™s and people",icon:"satisfied"},{label:"Nature",icon:"living-thing"},{label:"Food",icon:"food"},{label:"Activity",icon:"object"},{label:"Travel",icon:"transportation"},{label:"Objects",icon:"lightbulb"},{label:"Symbols",icon:"heart"},{label:"Flags",icon:"flag"}],p=K(()=>(a.showRecentlyUsedTab?c:c.slice(1)).map((e,t)=>({...e,label:a.tabsetLabels[t],id:(t+1).toString(),panelId:(t+1).toString()}))),k=K(()=>a.emojiFilter.length>0),h=j("1"),{isScrolling:u}=ge(a),D=j([]);N(()=>a.scrollIntoTab,()=>{!u.value&&!k.value&&(h.value=(a.scrollIntoTab+1).toString())}),N(k,()=>{k.value&&(h.value=null)});function L(e){u.value||(h.value=e),m("selected-tabset",e)}function d(e){D.value.push(e.$el)}function R(){D.value[0].focus()}function b(e,t){e.key==="Enter"&&(L(t),D.value[t-1].blur()),e.key==="Tab"&&(e.preventDefault(),m("focus-search-input")),e.key==="ArrowDown"&&m("focus-search-input")}return v({focusTabset:R}),(e,t)=>(_(),T("div",Ce,[U(be,{"tab-list-class":"d-emoji-picker__tabset-list",selected:h.value},{tabs:V(()=>[(_(!0),T(B,null,M(S(p),(s,w)=>(_(),ye(he,{id:s.id,ref_for:!0,ref:y=>{y&&d(y)},key:s.id,"panel-id":s.panelId,label:s.label,"aria-controls":"d-emoji-picker-list",tabindex:w+1,onClickCapture:le(y=>L(s.id),["stop"]),onKeydown:y=>b(y,s.id)},{default:V(()=>[U(X,{size:"400",name:s.icon},null,8,["name"])]),_:2},1032,["id","panel-id","label","tabindex","onClickCapture","onKeydown"]))),128))]),_:1},8,["selected"])]))}},H="https://static.dialpadcdn.com/joypixels/png/unicode/32/",F=9;function Re(n){const v=j([]),m=j([]),a=j(!1),c=j(!0);function p(e,t=!1){c.value=t,n("highlighted-emoji",e)}function k(e,t,s){v.value[t]||(v.value[t]=[]),v.value[t][s]=e}function h(e,t){m.value[t]=e}function u(e,t){var s,w,y;const x=a.value?(s=m.value)==null?void 0:s[t]:(y=(w=v.value)==null?void 0:w[e])==null?void 0:y[t];return x?(x.focus(),!0):!1}function D(e,t){u(e,t-1)||(v.value[e-1]?u(e-1,v.value[e-1].length-1):u(v.value.length-1,v.value[v.value.length-1].length-1))}function L(e,t){u(e,t+1)||u(e+1,0)||u(0,0)}function d(e,t){u(0,t-1)||u(0,m.value.length-1)}function R(e,t){u(0,t+1)||u(0,0)}function b(e,t,s){a.value?e==="left"?d(t,s):e==="right"&&R(t,s):e==="left"?D(t,s):e==="right"&&L(t,s)}return{emojiRefs:v,emojiFilteredRefs:m,isFiltering:a,hoverFirstEmoji:c,setEmojiRef:k,setFilteredRef:h,hoverEmoji:p,focusEmoji:u,handleHorizontalNavigation:b}}const Ie={class:"d-emoji-picker__selector"},$e={key:0,class:"d-emoji-picker__search-label d-emoji-picker__alignment"},De={key:0},Ae={class:"d-emoji-picker__tab"},Ue=["aria-label","onClick","onFocusin","onMouseover","onKeydown"],xe=["alt","aria-label","title","src"],qe={key:2,class:"d-emoji-picker__alignment"},Ne={class:"d-emoji-picker__tab","data-qa":"filtered-emojis"},Ke=["aria-label","onClick","onFocusin","onMouseover","onKeydown"],Ve=["alt","aria-label","title","src"],Be={__name:"emoji_selector",props:{emojiFilter:{type:String,default:""},skinTone:{type:String,required:!0},tabsetLabels:{type:Array,required:!0},selectedTabset:{type:Object,required:!0},searchResultsLabel:{type:String,required:!0},searchNoResultsLabel:{type:String,required:!0},recentlyUsedEmojis:{type:Array,default:()=>[]}},emits:["highlighted-emoji","selected-emoji","scroll-into-tab","is-scrolling","focus-skin-selector","focus-search-input"],setup(n,{expose:v,emit:m}){const a=n,{emojiRefs:c,emojiFilteredRefs:p,isFiltering:k,hoverFirstEmoji:h,setEmojiRef:u,setFilteredRef:D,hoverEmoji:L,focusEmoji:d,handleHorizontalNavigation:R}=Re(m),b=j(null),e=j(null),t=j(null),s=["Recently used","People","Nature","Food","Activity","Travel","Objects","Symbols","Flags"],w=K(()=>a.recentlyUsedEmojis.length?a.tabsetLabels.map(l=>({label:l,ref:j(null)})):a.tabsetLabels.slice(1).map(l=>({label:l,ref:j(null)}))),y=j(w.value[0].label),x=K(()=>a.recentlyUsedEmojis.length?s:s.slice(1)),P=j([]),Z=K(()=>[...$[`People${a.skinTone}`],...$.Nature,...$.Food,...$[`Activity${a.skinTone}`],...$.Travel,...$[`Objects${a.skinTone}`],...$.Symbols,...$.Flags]),ne=ie(()=>{p.value=[],ee()});N(Z,()=>{ee()},{immediate:!0}),N(()=>a.recentlyUsedEmojis,()=>{$["Recently used"]=a.recentlyUsedEmojis},{immediate:!0}),N(()=>a.emojiFilter,()=>{ce(),a.emojiFilter?k.value=!0:(k.value=!1,m("highlighted-emoji",null)),ne()}),N(()=>a.selectedTabset,l=>{O(l.tabId)},{deep:!0});function ee(){const l=a.emojiFilter.toLowerCase();P.value=Z.value.filter(o=>{const r=o.name.toLowerCase().includes(l),f=o.keywords.some(i=>i.toLowerCase().includes(l));return r||f}),J(()=>{l&&L(P.value[0],!0)})}function ie(l,o=300){let r;return(...f)=>{clearTimeout(r),r=setTimeout(()=>l(...f),o)}}function se(l){return`${H+l}.png`}function re(l){l.target.parentNode.style.display="none"}function O(l,o=!0){const r=w.value[l-1].ref.value[0];J(()=>{const f=e.value,i=l==="1"?0:r.offsetTop-20;let C=!0,g=f.scrollTop;m("is-scrolling",!0),f.addEventListener("scroll",()=>{if(C){const I=f.scrollTop;(g<I&&I>=i||g>I&&I<=i)&&(C=!1,m("is-scrolling",!1)),g=I}}),f.scrollTop=i,o&&d(l-1,0)})}function ce(){const l=e.value;l.scrollTop=0}function ue(){t.value=new IntersectionObserver(l=>{l.forEach(o=>{var r,f,i,C,g;const{target:I}=o,A=parseInt(I.dataset.index);o.isIntersecting&&I.offsetTop<=b.value.offsetTop+50?(y.value=((r=w.value[A-1])==null?void 0:r.label)??((f=w.value[0])==null?void 0:f.label),m("scroll-into-tab",A-1)):o.boundingClientRect.bottom<=((i=b.value)==null?void 0:i.getBoundingClientRect().bottom)?(m("scroll-into-tab",A),y.value=(C=w.value[A])==null?void 0:C.label):A===1&&(m("scroll-into-tab",A),y.value=(g=w.value[0])==null?void 0:g.label)})}),t.value.observe(b.value),Array.from(e.value.children).forEach((l,o)=>{t.value.observe(l),l.dataset.index=o})}const de=(l,o,r)=>{var f;if(l.preventDefault(),h.value=!1,l.key==="ArrowUp"){const i=o%F;if(!d(0,o-F)){const C=p.value.length-p.value.length%F+i;d(0,C),d(0,C)||d(0,p.value.length-1)}}if(l.key==="ArrowDown"&&!d(0,o+F)){const i=o%F;(f=p.value)!=null&&f[o+(F-i)]?d(0,p.value.length-1):d(0,i)}l.key==="ArrowLeft"&&R("left",0,o),l.key==="ArrowRight"&&R("right",0,o),l.key==="Tab"&&m("focus-skin-selector"),l.key==="Enter"&&m("selected-emoji",r)},me=(l,o,r,f)=>{var i,C;if(l.preventDefault(),l.key==="ArrowUp"){const g=r%F;if(o===0){const I=F-c.value[c.value.length-1].length%F,A=c.value[c.value.length-1].length+I-(F-g);d(c.value.length-1,A)||d(c.value.length-1,c.value[c.value.length-1].length-1);return}if(!d(o,r-F)){const I=o-1<0?0:o-1,A=c.value[I].length,ve=A-A%F+g;d(I,ve)||d(o-1,c.value[o-1].length-1)}}if(l.key==="ArrowDown"&&!d(o,r+F)){const g=r%F;(C=(i=c.value)==null?void 0:i[o])!=null&&C[r+(F-g)]?d(o,c.value[o].length-1):d(o+1,g)||d(0,g)||d(0,c.value[0].length-1)}l.key==="ArrowLeft"&&R("left",o,r),l.key==="ArrowRight"&&R("right",o,r),l.key==="Tab"&&(d(o+1,0)?O(o+1+1,!1):m("focus-skin-selector")),l.key==="Tab"&&l.shiftKey&&(d(o,0)&&o>0?O(o,!0):(O(1,!1),m("focus-search-input"))),l.key==="Enter"&&m("selected-emoji",f)};function fe(){d(0,0)}return te(()=>{ue()}),_e(()=>{t.value.disconnect()}),v({focusEmojiSelector:fe}),(l,o)=>(_(),T("div",Ie,[E("div",{id:"d-emoji-picker-list",ref_key:"listRef",ref:e,class:"d-emoji-picker__list"},[n.emojiFilter?(_(),T("p",$e,z(P.value.length>0?n.searchResultsLabel:n.searchNoResultsLabel),1)):(_(),T("div",{key:1,ref_key:"tabCategoryRef",ref:b,class:"d-emoji-picker__category d-emoji-picker__alignment"},[E("p",null,z(y.value),1)],512)),(_(!0),T(B,null,M(S(w),(r,f)=>W((_(),T("div",{key:f,ref_for:!0,ref:r.ref,class:"d-emoji-picker__alignment"},[f?(_(),T("p",De,z(r.label),1)):Y("",!0),E("div",Ae,[(_(!0),T(B,null,M(S($)[S(x)[f]+n.skinTone]?S($)[S(x)[f]+n.skinTone]:S($)[S(x)[f]],(i,C)=>(_(),T("button",{key:i.shortname,ref_for:!0,ref:g=>{g&&S(u)(g,f,C)},type:"button","aria-label":i.name,onClick:g=>l.$emit("selected-emoji",i),onFocusin:g=>l.$emit("highlighted-emoji",i),onFocusout:o[0]||(o[0]=g=>l.$emit("highlighted-emoji",null)),onMouseover:g=>l.$emit("highlighted-emoji",i),onMouseleave:o[1]||(o[1]=g=>l.$emit("highlighted-emoji",null)),onKeydown:g=>me(g,f,C,i)},[E("img",{class:"d-icon d-icon--size-500",alt:i.name,"aria-label":i.name,title:i.name,src:se(i.unicode_character),onError:re},null,40,xe)],40,Ue))),128))])])),[[Q,!n.emojiFilter]])),128)),n.emojiFilter?(_(),T("div",qe,[E("div",Ne,[(_(!0),T(B,null,M(P.value,(r,f)=>(_(),T("button",{key:r.shortname,ref_for:!0,ref:i=>{i&&S(D)(i,f)},type:"button","aria-label":r.name,class:oe({"hover-emoji":f===0&&S(h)}),onClick:i=>l.$emit("selected-emoji",r),onFocusin:i=>l.$emit("highlighted-emoji",r),onFocusout:o[2]||(o[2]=i=>l.$emit("highlighted-emoji",null)),onMouseover:i=>S(L)(r),onMouseleave:o[3]||(o[3]=i=>S(L)(null)),onKeydown:i=>de(i,f,r)},[E("img",{class:"d-icon d-icon--size-500",alt:r.name,"aria-label":r.name,title:r.name,src:`${S(H)+r.unicode_character}.png`},null,8,Ve)],42,Ke))),128))])])):Y("",!0)],512)]))}},Me=G(Be,[["__scopeId","data-v-067b0cfe"]]),ze={"data-qa":"skin-selector"},He={class:"d-emoji-picker__skin-list"},Pe=["onKeydown","onClick"],Oe=["alt","aria-label","title","src"],Je={class:"d-emoji-picker__skin-selected"},Ge=["aria-label"],Xe=["alt","aria-label","title","src"],We={__name:"emoji_skin_selector",props:{skinTone:{type:String,required:!0},isHovering:{type:Boolean,default:!1},skinSelectorButtonTooltipLabel:{type:String,required:!0}},emits:["skin-tone","focus-tabset"],setup(n,{expose:v,emit:m}){const a=n,c=[{name:":wave_tone1:",unicode_output:"1f44b-1f3fb",skinTone:"Light",skinCode:"_tone1"},{name:":wave_tone2:",unicode_output:"1f44b-1f3fc",skinTone:"MediumLight",skinCode:"_tone2"},{name:":wave_tone3:",unicode_output:"1f44b-1f3fd",skinTone:"Medium",skinCode:"_tone3"},{name:":wave_tone4:",unicode_output:"1f44b-1f3fe",skinTone:"MediumDark",skinCode:"_tone4"},{name:":wave_tone5:",unicode_output:"1f44b-1f3ff",skinTone:"Dark",skinCode:"_tone5"},{name:":wave:",unicode_output:"1f44b",skinTone:"Default",skinCode:""}],p=j(c.find(e=>e.skinTone===a.skinTone)),k=j(!1),h=j(null),u=j([]);Te(()=>a.isHovering&&(k.value=!1));function D(e){u.value.push(e)}function L(){h.value.focus()}function d(e){p.value=e,k.value=!1,m("skin-tone",e.skinTone),J(()=>L())}const R=(e,t,s)=>{var w,y,x;e.preventDefault(),e.key==="ArrowLeft"&&(s===0&&((w=u.value[u.value.length-1])==null||w.focus()),(y=u.value[s-1])==null||y.focus()),e.key==="ArrowRight"&&((x=u.value[s+1])==null||x.focus()),e.key==="Enter"&&(t?d(t):b()),e.key==="Tab"&&m("focus-tabset")};function b(){k.value=!k.value,J(()=>u.value[0].focus())}return v({focusSkinSelector:L}),(e,t)=>(_(),T("div",ze,[W(E("div",He,[(_(),T(B,null,M(c,(s,w)=>E("button",{ref_for:!0,ref:y=>{y&&D(y)},key:s.name,class:oe({selected:p.value.skinCode===s.skinCode}),onKeydown:y=>R(y,s,w),onClick:y=>d(s)},[E("img",{class:"d-icon d-icon--size-500",alt:s.name,"aria-label":s.name,title:s.name,src:`${S(H)+s.unicode_output}.png`},null,8,Oe)],42,Pe)),64))],512),[[Q,k.value]]),W(E("div",Je,[U(ke,{placement:"top-end"},{anchor:V(()=>[E("button",{ref_key:"skinSelectorRef",ref:h,"aria-label":n.skinSelectorButtonTooltipLabel,tabindex:"-1",onClick:b,onKeydown:t[0]||(t[0]=s=>R(s))},[E("img",{class:"d-icon d-icon--size-500",alt:p.value.name,"aria-label":p.value.name,title:p.value.name,src:`${S(H)+p.value.unicode_output}.png`},null,8,Xe)],40,Ge)]),default:V(()=>[ae(z(n.skinSelectorButtonTooltipLabel)+" ",1)]),_:1})],512),[[Q,!k.value]])]))}},Qe=G(We,[["__scopeId","data-v-3a6fb9c2"]]),Ye={class:"d-emoji-picker__data"},Ze=["alt","aria-label","title","src"],et={__name:"emoji_description",props:{emoji:{type:Object,default:null}},setup(n){return(v,m)=>{var a;return _(),T("div",Ye,[n.emoji?(_(),T("img",{key:0,class:"d-icon d-icon--size-500",alt:n.emoji.name,"aria-label":n.emoji.name,title:n.emoji.name,src:`${S(H)+n.emoji.unicode_character}.png`},null,8,Ze)):Y("",!0),ae(" "+z((a=n.emoji)==null?void 0:a.name),1)])}}},tt=G(et,[["__scopeId","data-v-48c61881"]]),lt={class:"d-emoji-picker"},ot={class:"d-emoji-picker--header"},at={class:"d-emoji-picker--body"},nt={class:"d-emoji-picker--footer"},rt={__name:"emoji_picker",props:{recentlyUsedEmojis:{type:Array,default:()=>[]},searchPlaceholderLabel:{type:String,required:!0},searchResultsLabel:{type:String,required:!0},searchNoResultsLabel:{type:String,required:!0},tabSetLabels:{type:Array,required:!0},skinTone:{type:String,default:"Default"},skinSelectorButtonTooltipLabel:{type:String,required:!0}},emits:["selected-emoji","skin-tone","close"],setup(n,{emit:v}){const m=n,a=j(""),c=j(null),p=j({}),k=j(0),h=j(!1),u=K(()=>m.recentlyUsedEmojis.length>0);function D(b){a.value="",p.value=b,p.value={...p.value,tabId:b}}function L(b){k.value=b}function d(b){h.value=b}function R(b){c.value=b}return(b,e)=>(_(),T("div",lt,[E("div",ot,[U(Le,{ref:"tabsetRef","emoji-filter":a.value,"show-recently-used-tab":S(u),"scroll-into-tab":k.value,"tabset-labels":n.tabSetLabels,"is-scrolling":h.value,onFocusSearchInput:e[0]||(e[0]=t=>b.$refs.searchInputRef.focusSearchInput()),onSelectedTabset:D,onKeydown:e[1]||(e[1]=q(t=>v("close"),["esc"]))},null,8,["emoji-filter","show-recently-used-tab","scroll-into-tab","tabset-labels","is-scrolling"])]),E("div",at,[U(Fe,{ref:"searchInputRef",modelValue:a.value,"onUpdate:modelValue":e[2]||(e[2]=t=>a.value=t),"search-placeholder-label":n.searchPlaceholderLabel,onSelectFirstEmoji:e[3]||(e[3]=t=>v("selected-emoji",c.value)),onFocusTabset:e[4]||(e[4]=t=>b.$refs.tabsetRef.focusTabset()),onFocusEmojiSelector:e[5]||(e[5]=t=>b.$refs.emojiSelectorRef.focusEmojiSelector()),onKeydown:e[6]||(e[6]=q(t=>v("close"),["esc"]))},null,8,["modelValue","search-placeholder-label"]),U(Me,{ref:"emojiSelectorRef","emoji-filter":a.value,"skin-tone":n.skinTone,"tabset-labels":n.tabSetLabels,"search-results-label":n.searchResultsLabel,"search-no-results-label":n.searchNoResultsLabel,"recently-used-emojis":n.recentlyUsedEmojis,"selected-tabset":p.value,onScrollIntoTab:L,onIsScrolling:d,onHighlightedEmoji:R,onSelectedEmoji:e[7]||(e[7]=t=>v("selected-emoji",t)),onFocusSkinSelector:e[8]||(e[8]=t=>b.$refs.skinSelectorRef.focusSkinSelector()),onFocusSearchInput:e[9]||(e[9]=t=>b.$refs.searchInputRef.focusSearchInput()),onKeydown:e[10]||(e[10]=q(t=>v("close"),["esc"]))},null,8,["emoji-filter","skin-tone","tabset-labels","search-results-label","search-no-results-label","recently-used-emojis","selected-tabset"])]),E("div",nt,[U(tt,{emoji:c.value},null,8,["emoji"]),U(Qe,{ref:"skinSelectorRef","is-hovering":!!c.value,"skin-selector-button-tooltip-label":n.skinSelectorButtonTooltipLabel,"skin-tone":n.skinTone,onSkinTone:e[11]||(e[11]=t=>v("skin-tone",t)),onFocusTabset:e[12]||(e[12]=t=>b.$refs.tabsetRef.focusTabset()),onKeydown:e[13]||(e[13]=q(t=>v("close"),["esc"]))},null,8,["is-hovering","skin-selector-button-tooltip-label","skin-tone"])])]))}};export{dt as DtEmoji,rt as DtEmojiPicker,mt as DtEmojiTextWrapper,ft as codeToEmojiData,vt as customEmojiAssetUrl,bt as defaultEmojiAssetUrl,pt as emojiFileExtensionLarge,ht as emojiFileExtensionSmall,kt as emojiImageUrlLarge,gt as emojiImageUrlSmall,jt as emojiJson,yt as emojiVersion,_t as filterValidShortCodes,Tt as findEmojis,St as findShortCodes,wt as getEmojiData,Et as setCustomEmojiJson,Ft as setCustomEmojiUrl,Ct as setEmojiAssetUrlLarge,Lt as setEmojiAssetUrlSmall,Rt as shortcodeToEmojiData,It as stringToUnicode,$t as unicodeToString,Dt as validateCustomEmojiJson};
