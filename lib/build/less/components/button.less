@import (reference) '../variables/icons.less';

//
//  DIALTONE
//  COMPONENTS: BUTTONS
//
//  These are button classes for Dialpad's design system Dialtone.
//  For further documentation of these and other classes,
//  visit https://dialpad.design/components/buttons
//
//  TABLE OF CONTENTS
//  • BASE STYLE
//  • VISUAL STYLES
//  • ALTERNATE STYLES
//  • SIZES
//
//  ============================================================================
//  $   BASE STYLE
//  ----------------------------------------------------------------------------
.d-btn {
    //  Component specific CSS Vars
    //  ------------------------------------------------------------------------
    --button--fc: var(--primary-color);
    --button--bgc: transparent;
    --button--bc: transparent;
    --button--br: var(--base--corner-radius);

    position: relative;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    box-sizing: border-box;
    padding: calc(var(--su8) - var(--su1));  // Subtract border
    color: var(--button--fc);
    font-size: var(--fs16);
    font-family: inherit;
    line-height: var(--lh4);
    text-transform: inherit;
    text-decoration: none;
    vertical-align: middle;
    background-color: var(--button--bgc);
    border: 0.1rem solid var(--button--bc);
    border-radius: var(--button--br);
    box-shadow: var(--button--bs);
    cursor: pointer;
    transition-timing-function: var(--ttf-in-out);
    transition-duration: 75ms;
    transition-property: background-color, border, box-shadow;
    user-select: none;
    fill: currentColor;

    //  --  STATES
    //  ------------------------------------------------------------------------

    &:active,
    &:hover {
        --button--fc: var(--primary-color-hover);
        --button--bgc: hsla(var(--primary-color-hsl) ~' / ' 10%);
    }

    &:focus {
        outline: none;
        box-shadow: var(--bs-focus-ring);
    }

    &[disabled] {
        color: var(--black-400);
        background-color: var(--black-100);
        border-color: transparent;
        cursor: not-allowed;
        transition: none;
    }

    .d-btn__icon .d-svg {
        width: @icon16;
        height: @icon16;
    }
}

//  ============================================================================
//  $   SIZES
//  ----------------------------------------------------------------------------
//  $$  EXTRA SMALL
//  ----------------------------------------------------------------------------
.d-btn--xs {
    padding: calc(var(--su6) - var(--su1)) calc(var(--su8) - var(--su1));  // Subtract border
    font-size: var(--fs12);

    .d-btn__icon .d-svg {
        width: @icon12;
        height: @icon12;
    }
}

//  $$ SMALL
//  ----------------------------------------------------------------------------
.d-btn--sm {
    padding: calc(var(--su6) - var(--su1)) calc(var(--su8) - var(--su1));  // Subtract border
    font-size: var(--fs14);
    line-height: var(--lh6);

    .d-btn__icon .d-svg {
        width: @icon14;
        height: @icon14;
    }
}

//  $$  LARGE
//  ----------------------------------------------------------------------------
.d-btn--lg {
    padding: calc(var(--su12) - var(--su1)) calc(var(--su16) - var(--su1)); // Subtract border
    font-size: var(--fs20);

    .d-btn__icon .d-svg {
        width: @icon20;
        height: @icon20;
    }
}

//  $$  EXTRA LARGE
//  ----------------------------------------------------------------------------
.d-btn--xl {
    padding: calc(var(--su12) - var(--su1)) calc(var(--su16) - var(--su1)); // Subtract border
    font-size: var(--fs24);
    line-height: var(--lh8);

    .d-btn__icon .d-svg {
        width: @icon24;
        height: @icon24;
    }
}

//  ============================================================================
//  $   BUTTON LABEL
//  ----------------------------------------------------------------------------
.d-btn__label {
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

//  ============================================================================
//  $   BUTTON ICON
//  ----------------------------------------------------------------------------
.d-btn__icon {
    display: flex;
    margin-top: var(--sun4);
    margin-bottom: var(--sun4);
    line-height: 0;
}

.d-btn__icon--left {
    order: -1;
}

.d-btn__icon--right {
    order: 1;
}

.d-btn__icon--left:not(:only-child) {
    margin-left: var(--sun2);
}

.d-btn__icon--right:not(:only-child) {
    margin-right: var(--sun2);
}

.d-btn__icon--left ~ .d-btn__label,
.d-btn__label ~ .d-btn__icon--right {
    margin-left: var(--su4);
}

.d-btn__icon--right ~ .d-btn__label,
.d-btn__label ~ .d-btn__icon--left {
    margin-right: var(--su4);
}

//  ============================================================================
//  $   VISUAL STYLES
//  ----------------------------------------------------------------------------
//  $$  CIRCLE BUTTONS
//  ----------------------------------------------------------------------------
.d-btn--circle {
    --button--fc: var(--black-800);
    --button--br: var(--br-circle);

    padding: calc(var(--su8) + var(--su1));
    transition-duration: 150ms;

    &:hover {
        --button--fc: var(--black-800);
        --button--bgc: var(--black-100);
    }

    &:focus {
        box-shadow: var(--bs-focus-ring-circle);
    }

    .d-btn__icon {
        margin: unset;
    }

    &.d-btn__label {
        display: none;
    }

    &.d-btn--outlined {
        --button--bc: var(--black-700);
    }

    // &:active {
    //     border-color: hsla(var(--black-700-h) var(--black-700-s) var(--black-700-l) ~" / " 50%);
    //     background-color: hsla(var(--black-700-h) var(--black-700-s) var(--black-700-l) ~" / " 10%);
    // }

    //  Adjust padding based on sizes
    &.d-btn--xs {
        padding: calc(var(--su8) - var(--su1));

        --button--br: var(--br-circle);
    }

    &.d-btn--sm {
        padding: var(--su8);

        --button--br: var(--br-circle);
    }

    &.d-btn--lg {
        padding: calc(var(--su12) + var(--su1));

        --button--br: var(--br-circle);
    }

    &.d-btn--xl {
        padding: calc(var(--su16) - var(--su1));

        --button--br: var(--br-circle);
    }
}

//  $$  OUTLINED BUTTON
//  ----------------------------------------------------------------------------
.d-btn--outlined {
    --button--bc: var(--primary-color);
}

//  $$  PRIMARY BUTTON
//  ----------------------------------------------------------------------------
.d-btn--primary {
    --button--fc: var(--white);
    --button--bgc: var(--primary-color);

    &:hover {
        --button--fc: var(--white);
        --button--bgc: var(--primary-color-hover);
    }
}

//  $$  MUTED BUTTON
//  ----------------------------------------------------------------------------
.d-btn--muted {
    --button--fc: var(--black-700);

    &:hover {
      --button--fc: var(--black-800);
      --button--bgc: hsla(var(--muted-color-hsl) ~' / ' 10%);
    }

    &:focus {
        box-shadow: var(--bs-focus-ring-muted);
    }

    &.d-btn--outlined {
        --button--bc: var(--black-500);
    }
}

//  $$  DANGER BUTTON
//  ----------------------------------------------------------------------------
.d-btn--danger {
    --button--fc: var(--error-color);

    &:hover {
        --button--bgc: hsla(var(--error-color-hsl) ~' / ' 10%);
        --button--fc: var(--error-color-hover);
    }

    &:focus {
        box-shadow: var(--bs-focus-ring-error);
    }

    &.d-btn--outlined {
        --button--bc: var(--error-color);
    }

    &.d-btn--primary {
        --button--fc: var(--white);
        --button--bgc: var(--error-color);

        &:hover {
            --button--fc: var(--white);
            --button--bgc: var(--error-color-hover);
        }
    }
}

//  $$  INVERTED BUTTON
//  ----------------------------------------------------------------------------
//  --  Base, clear inverted button
.d-btn--inverted {
    --button--fc: var(--white);
    --button--bgc: transparent;

    &:hover {
        --button--fc: var(--white);
        --button--bgc: hsla(var(--white-hsl) ~' / ' 15%);
    }

    &:focus {
        box-shadow: var(--bs-focus-ring-inverted);
    }

    //  --  OUTLINED
    &.d-btn--outlined {
        --button--bc: var(--white);
    }

    //  --  PRIMARY
    &.d-btn--primary {
        --button--fc: var(--primary-color);
        --button--bgc: var(--white);

        &:hover {
            --button--fc: var(--primary-color-hover);
            --button--bgc: hsla(var(--white-hsl) ~' / ' 90%);
        }
    }
}

//  $$  LOADING STATE
//  ----------------------------------------------------------------------------
.d-btn--loading {
    .d-btn-loading();
}

//  $$  DISABLED STATE
//  ----------------------------------------------------------------------------
.d-btn--disabled {
    color: var(--black-400);
    background-color: var(--black-100);
    border-color: transparent;
    cursor: not-allowed;
    transition: none;
    pointer-events: none;
}

//  $$  BRAND BUTTONS
//  ----------------------------------------------------------------------------
.d-btn--brand {
    display: flex;
    color: var(--white);
    background-color: hsl(var(--brand-color-h) var(--brand-color-s) var(--brand-color-l));

    &:hover,
    &:focus,
    &:active {
        color: hsla(var(--white-hsl) ~' / ' 90%);
        background-color: hsl(var(--brand-color-h) calc(var(--brand-color-s) + 2.5%) calc(var(--brand-color-l) - 5%));
    }

    &:focus {
        box-shadow: 0 0 0 var(--su1) var(--white), 0 0 0 0.25em hsla(var(--brand-color-h) var(--brand-color-s) var(--brand-color-l) ~' / ' 90%);
    }

    &:active {
        background-color: hsl(var(--brand-color-h) calc(var(--brand-color-s) + 5%) calc(var(--brand-color-l) - 10%));
    }

    .d-btn__icon {
      align-items: center;
      justify-content: center;
      width: 2em;
      height: 2em;
      margin-right: var(--su8);
      margin-left: var(--sun4);
      background-color: var(--white);
      border-radius: var(--br2);
    }

    .d-btn__label {
        flex: 1 auto;
    }
}

//  --  GOOGLE
.d-btn--google {
    --brand-color-h: 217;
    --brand-color-s: 89%;
    --brand-color-l: 61%;
}
//  --  OFFICE 365
.d-btn--o365 {
    --brand-color-h: 15;
    --brand-color-s: 99%;
    --brand-color-l: 46%;
}
//  --  LINKEDIN
.d-btn--linkedin {
    --brand-color-h: 197;
    --brand-color-s: 100%;
    --brand-color-l: 26%;
}

//  ============================================================================
//  @   BUTTON LOADER
//      Changes the button
//  ----------------------------------------------------------------------------
//  @@  BASE STYLE
//  ----------------------------------------------------------------------------
.d-btn-loading() {
    //  Disable clicking while the loader is in place
    pointer-events: none;

    //  Hide anything that was there before
    .d-btn__icon,
    .d-btn__label {
        opacity: 0;
        transition: opacity 50ms var(--ttf-in-out);
    }

    //  Show the loading animation
    &::before {
        position: absolute;
        top: calc(50% - var(--su8));
        left: calc(50% - var(--su8));
        width: var(--su16);
        height: var(--su16);
        border: var(--su2) solid currentColor;
        border-left-color: transparent !important;
        border-radius: var(--br-circle);
        animation: d-loading-circle 900ms infinite linear;
        content: '';
    }
}

//  ============================================================================
//  $   BUTTON GROUP
//  ----------------------------------------------------------------------------
.d-btn-group {
    display: flex;

    &.d-btn-group--start {
        justify-content: start;
    }

    &.d-btn-group--end {
        justify-content: end;
    }

    &.d-btn-group--space-between {
        justify-content: space-between;
    }

    .d-btn:not(:last-child) {
        margin-right: var(--su16);
    }

    &.d-btn-group--extra-tight {
        .d-btn:not(:last-child) {
            margin-right: var(--su8);
        }
    }

    &.d-btn-group--tight {
        .d-btn:not(:last-child) {
            margin-right: var(--su12);
        }
    }

    &.d-btn-group--loose {
        .d-btn:not(:last-child) {
            margin-right: var(--su24);
        }
    }
}
