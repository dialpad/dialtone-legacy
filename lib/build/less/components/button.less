//@import (reference) '../variables/icons.less';

//
//  DIALTONE
//  COMPONENTS: BUTTONS
//
//  These are button classes for Dialpad's design system Dialtone.
//  For further documentation of these and other classes,
//  visit https://dialpad.design/components/buttons
//
//  TABLE OF CONTENTS
//  • BASE STYLE
//  • VISUAL STYLES
//  • ALTERNATE STYLES
//  • SIZES
//
//  ============================================================================
//  $   BASE STYLE
//  ----------------------------------------------------------------------------

.d-btn,
.d-btn--md {
    //  Component specific CSS Vars
    //  ------------------------------------------------------------------------
    --button-color-text: var(--purple-400);
    --button-color-background: transparent;
    --button-color-border: transparent;
    --button-gap: calc(var(--button-padding-x) / 2);
    --button-border-radius: var(--size-400);
    --button-border-width: var(--size-100);
    --button-font-size: var(--fs-200);
    --button-font-weight: var(--fw-medium);
    --button-line-height-xs: var(--lh-200); // TODO: these used to vary, remove if all wind up all the same
    --button-line-height-sm: var(--lh-200); // TODO: these used to vary, remove if all wind up all the same
    --button-line-height-md: var(--lh-200); // TODO: these used to vary, remove if all wind up all the same
    --button-line-height-lg: var(--lh-200); // TODO: these used to vary, remove if all wind up all the same
    --button-line-height-xl: var(--lh-200); // TODO: these used to vary, remove if all wind up all the same
    --button-line-height: var(--button-line-height-md);
    --button-padding-y-xs: calc(calc(var(--space-400) - var(--space-100)) - var(--button-border-width)); // ((8 - 1) - border-width)
    --button-padding-x-xs: calc(var(--space-400) - var(--button-border-width)); // 8 minus border-width
    --button-padding-y-sm: calc(var(--space-400) - var(--button-border-width)); // 8 minus border-width
    --button-padding-x-sm: calc(var(--space-450) - var(--button-border-width)); // 12 minus border-width
    --button-padding-y-md: calc(var(--space-400) - var(--button-border-width)); // 8 minus border-width
    --button-padding-x-md: calc(var(--space-450) - var(--button-border-width)); // 12 minus border-width
    --button-padding-y-lg: calc((var(--space-400) + var(--space-200)) - var(--button-border-width)); // 10 minus border-width
    --button-padding-x-lg: calc(var(--space-500) - var(--button-border-width)); // 16 minus border-width
    --button-padding-y-xl: calc(var(--space-450) - var(--button-border-width)); // 12 minus border-width
    --button-padding-x-xl: calc(var(--space-500) - var(--button-border-width)); // 16 minus border-width
    --button-padding-y: var(--button-padding-y-md);
    --button-padding-x: var(--button-padding-x-md);

    position: relative;
    display: inline-flex;
    gap: var(--button-gap);
    align-items: center;
    justify-content: center;
    box-sizing: border-box;
    padding: var(--button-padding-y) var(--button-padding-x);
    color: var(--button-color-text);
    font-weight: var(--button-font-weight);
    font-size: var(--button-font-size);
    font-family: inherit;
    line-height: var(--button-line-height);
    text-transform: inherit;
    text-decoration: none;
    vertical-align: middle;
    background-color: var(--button-color-background);
    border-color: var(--button-color-border);
    border-style: solid;
    border-width: var(--button-border-width);
    border-radius: var(--button-border-radius);
    box-shadow: var(--button--bs);
    cursor: pointer;
    transition-timing-function: var(--ttf-out-quint);
    transition-duration: var(--td200);
    transition-property: background-color, border, box-shadow;
    user-select: none;
    fill: currentColor;

    //  --  STATES
    //  ------------------------------------------------------------------------
    &:hover:not([disabled]) {
        --button-color-text: hsl(var(--purple-400-h) var(--purple-400-s) calc(var(--purple-400-l) - 10%));
        --button-color-background: hsla(var(--purple-400-hsl) ~' / ' 4%);
    }

    &:active:not([disabled]),
    &.d-btn--active:not([disabled]),
    &.d-btn--active:active:not([disabled]) {
        --button-color-text: hsl(var(--purple-400-h) var(--purple-400-s) calc(var(--purple-400-l) - 10%));
        --button-color-background: hsla(var(--purple-400-hsl) ~' / ' 14%);
    }


    &:focus-visible {
      outline: none;
      box-shadow: var(--bs-focus-ring);
    }

    &[disabled] {
        --button-color-border: transparent !important;
        --button-color-text: var(--fc-disabled) !important;
        --button-color-background: var(--black-300) !important;

        cursor: not-allowed;
        transition: none;
    }

    .d-btn__icon .d-svg {
        width: @icon16;
        height: @icon16;
    }
}

//  ============================================================================
//  $   SIZES
//  ----------------------------------------------------------------------------
//  $$  EXTRA SMALL
//  ----------------------------------------------------------------------------
.d-btn--xs {
    --button-padding-y: var(--button-padding-y-xs);
    --button-padding-x: var(--button-padding-x-xs);
    --button-font-size: var(--fs-100);
    --button-line-height: var(--button-line-height-xs);
    --button-border-radius: var(--size-300);

    .d-btn__icon .d-svg {
        width: @icon12;
        height: @icon12;
    }
}

//  $$ SMALL
//  ----------------------------------------------------------------------------
.d-btn--sm {
    --button-padding-y: var(--button-padding-y-sm);
    --button-padding-x: var(--button-padding-x-sm);
    --button-font-size: var(--fs-100);
    --button-line-height: var(--button-line-height-sm);

    .d-btn__icon .d-svg {
        width: @icon14;
        height: @icon14;
    }
}

//  $$  MEDIUM
//  ----------------
.d-btn--md {
    //
}

//  $$  LARGE
//  ----------------------------------------------------------------------------
.d-btn--lg {
    --button-padding-y: var(--button-padding-y-lg);
    --button-padding-x: var(--button-padding-x-lg);
    --button-font-size: var(--fs-300);
    --button-line-height: var(--button-line-height-lg);
    --button-border-radius: var(--size-450);

    .d-btn__icon .d-svg {
        width: @icon20;
        height: @icon20;
    }
}

//  $$  EXTRA LARGE
//  ----------------------------------------------------------------------------
.d-btn--xl {
    --button-padding-y: var(--button-padding-y-xl);
    --button-padding-x: var(--button-padding-x-xl);
    --button-font-size: var(--fs-400);
    --button-font-weight: var(--fw-normal);
    --button-line-height: var(--button-line-height-xl);
    --button-border-radius: var(--size-500);

    .d-btn__icon .d-svg {
        width: @icon24;
        height: @icon24;
    }
}

//  ============================================================================
//  $   BUTTON LABEL
//  ----------------------------------------------------------------------------
.d-btn__label {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    // background-color: rgba(0,0,0,.5);
}

//  ============================================================================
//  $   BUTTON WITH ICON
//  ----------------------------------------------------------------------------
.d-btn--vertical {
    flex-direction: column;
}

.d-btn__icon {
    display: flex;
    // background-color: rgba(0,0,0,.5);

    .d-icon {
        // outline: 1px solid red;
        // opacity: 0;
    }
}


.d-btn__icon--left,
.d-btn__icon--top {
    order: -1;
}

.d-btn__icon--right,
.d-btn__icon--bottom {
    order: 1;
}

.d-btn__icon--left:not(:only-child) {
    margin-left: var(--space-200-negative);
}

.d-btn__icon--right:not(:only-child) {
    margin-right: var(--space-200-negative);
}

//  ============================================================================
//  $   VISUAL STYLES
//  ----------------------------------------------------------------------------
//  $$  CIRCLE BUTTONS
//  ----------------------------------------------------------------------------
.d-btn--circle {
    --button-padding-x: var(--button-padding-y-md);
    --button-padding-y: var(--button-padding-y-md);
    --button-color-text: var(--black-800);
    --button-border-radius: var(--br-circle);

    &:hover:not([disabled]) {
        --button-color-text: var(--muted-color-hover);
        --button-color-background: hsla(var(--black-800-hsl) ~' / ' 3%);
    }

    &:active:not([disabled]),
    &.d-btn--active:not([disabled]),
    &.d-btn--active:active:not([disabled]) {
        --button-color-text: var(--fc-secondary);
        --button-color-background: hsla(var(--black-800-hsl) ~' / ' 9%);
    }

    .d-btn__icon {
        margin: unset;
    }

    &.d-btn__label {
        display: none;
    }

    &.d-btn--outlined {
        --button-color-border: var(--black-600);
    }

    //  Adjust padding based on sizes
    &.d-btn--xs {
        --button-padding-y: var(--button-padding-y-xs);
        --button-padding-x: var(--button-padding-y-xs);
    }

    &.d-btn--sm {
        --button-padding-y: var(--button-padding-y-sm);
        --button-padding-x: var(--button-padding-y-sm);
    }

    &.d-btn--md {
        --button-padding-x: var(--button-padding-y-md);
        --button-padding-y: var(--button-padding-y-md);
    }

    &.d-btn--lg {
        --button-padding-x: calc(var(--button-padding-y-lg) + var(--space-100));
        --button-padding-y: calc(var(--button-padding-y-lg) + var(--space-100));
    }

    &.d-btn--xl {
        --button-padding-x: calc(var(--button-padding-y-xl) + var(--space-300));
        --button-padding-y: calc(var(--button-padding-y-xl) + var(--space-300));
    }
}

//  $$  OUTLINED BUTTON
//  ----------------------------------------------------------------------------
.d-btn--outlined {
    --button-color-border: var(--purple-400);
}

//  $$  PRIMARY BUTTON
//  ----------------------------------------------------------------------------
.d-btn--primary {
    --button-color-text: var(--white);
    --button-color-background: var(--purple-400);

    &:hover:not([disabled]) {
      --button-color-text: var(--white);
      --button-color-background: hsl(var(--purple-400-h), var(--purple-400-s), calc(var(--purple-400-l) - 6%));
    }

    &:active:not([disabled]),
    &.d-btn--active:not([disabled]),
    &.d-btn--active:active:not([disabled]) {
      --button-color-text: var(--white);
      --button-color-background: hsl(var(--purple-400-h), var(--purple-400-s), calc(var(--purple-400-l) - 12%));
    }
}

//  $$  MUTED BUTTON
//  ----------------------------------------------------------------------------
.d-btn--muted {
    --button-color-text: var(--fc-secondary);

    &:hover:not([disabled]) {
        --button-color-text: var(--fc-secondary);
        --button-color-background: hsla(var(--black-800-hsl) ~' / ' 5%);
    }

    &:active:not([disabled]),
    &.d-btn--active:not([disabled]),
    &.d-btn--active:active:not([disabled]) {
        --button-color-text: var(--fc-secondary);
        --button-color-background: hsla(var(--black-800-hsl) ~' / ' 10%);
    }

    &.d-btn--outlined {
        --button-color-border: var(--black-600);
    }
}

//  $$  DANGER BUTTON
//  ----------------------------------------------------------------------------
.d-btn--danger {
    --button-color-text: var(--red-300);

    &:hover:not([disabled]) {
        --button-color-text: hsl(var(--red-300-h), var(--red-300-s), calc(var(--red-300-l) - 8%));
        --button-color-background: hsla(var(--red-300-hsl) / 0.03);
    }

    &:active:not([disabled]),
    &.d-btn--active:not([disabled]),
    &.d-btn--active:active:not([disabled]) {
        --button-color-text: hsl(var(--red-300-h), var(--red-300-s), calc(var(--red-300-l) - 8%));
        --button-color-background: hsla(var(--red-300-hsl) / 0.09);
    }

    &.d-btn--outlined {
        --button-color-border: var(--red-300);
    }

    &.d-btn--primary {
        --button-color-text: var(--white);
        --button-color-background: var(--red-300);

        &:hover:not([disabled]) {
            --button-color-text: var(--white);
            --button-color-background: hsl(var(--red-300-h), var(--red-300-s), calc(var(--red-300-l) - 4%));
        }

        &:active:not([disabled]),
        &.d-btn--active:not([disabled]),
        &.d-btn--active:active:not([disabled]) {
            --button-color-text: var(--white);
            --button-color-background: hsl(var(--red-300-h), var(--red-300-s), calc(var(--red-300-l) - 8%));
        }
    }
}

//  $$  INVERTED BUTTON
//  ----------------------------------------------------------------------------
//  --  Base, clear inverted button
.d-btn--inverted {
    --button-color-text: var(--white);
    --button-color-background: transparent;

    &:hover:not([disabled]) {
        --button-color-text: var(--white);
        --button-color-background: hsla(var(--white-hsl) ~' / ' 15%);
    }

    &:active:not([disabled]),
    &.d-btn--active:not([disabled]),
    &.d-btn--active:active:not([disabled]) {
        --button-color-text: var(--white);
        --button-color-background: hsla(var(--white-hsl) ~' / ' 30%);
    }

    //  --  OUTLINED
    &.d-btn--outlined {
        --button-color-border: var(--white);
    }

    //  --  PRIMARY
    &.d-btn--primary {
        --button-color-text: var(--purple-400);
        --button-color-background: hsl(var(--purple-100-h), var(--purple-100-s), 100%);

        &:hover:not([disabled]) {
            --button-color-text: hsl(var(--purple-400-h) var(--purple-400-s) calc(var(--purple-400-l) - 10%));
            --button-color-background: hsl(var(--purple-100-h), var(--purple-100-s), 94%);
        }

        &:active:not([disabled]),
        &.d-btn--active:not([disabled]),
        &.d-btn--active:active:not([disabled]) {
            --button-color-text: hsl(var(--purple-400-h) var(--purple-400-s) calc(var(--purple-400-l) - 10%));
            --button-color-background: hsl(var(--purple-100-h), var(--purple-100-s), 91%);
        }
    }
}

//  $$  ICON ONLY
//  ----------------------------------------------------------------------------
.d-btn--icon-only {
    --button-padding-x: var(--button-padding-y-md);
    --button-padding-y: var(--button-padding-y-md);

    .d-btn__icon {
        margin: unset;
    }

    //  Adjust padding based on sizes
    &.d-btn--xs {
        --button-padding-y: var(--button-padding-y-xs);
        --button-padding-x: var(--button-padding-y-xs);
    }

    &.d-btn--sm {
        --button-padding-y: var(--button-padding-y-sm);
        --button-padding-x: var(--button-padding-y-sm);
    }

    &.d-btn--md {
        --button-padding-x: var(--button-padding-y-md);
        --button-padding-y: var(--button-padding-y-md);
    }

    &.d-btn--lg {
        --button-padding-x: calc(var(--button-padding-y-lg) + var(--space-100));
        --button-padding-y: calc(var(--button-padding-y-lg) + var(--space-100));
    }

    &.d-btn--xl {
        --button-padding-x: calc(var(--button-padding-y-xl) + var(--space-300));
        --button-padding-y: calc(var(--button-padding-y-xl) + var(--space-300));
    }
}

//  $$  LOADING STATE
//  ----------------------------------------------------------------------------
.d-btn--loading {
    .d-btn-loading();
}

//  $$  DISABLED STATE
//  ----------------------------------------------------------------------------
.d-btn--disabled {
    --button-color-text: var(--fc-disabled) !important;
    --button-color-background: var(--black-300) !important;
    --button-color-border: transparent !important;

    cursor: not-allowed;
    transition: none;
    pointer-events: none;
}

//  $$  BRAND BUTTONS
//  ----------------------------------------------------------------------------
.d-btn--brand {
    --button-color-text: var(--white);
    --button-color-background: hsl(var(--brand-color-h) var(--brand-color-s) var(--brand-color-l));

    display: flex;

    &:hover:not([disabled]),
    &:active:not([disabled]) {
        --button-color-text: hsla(var(--white-hsl) ~' / ' 90%);
        --button-color-background: hsl(var(--brand-color-h) calc(var(--brand-color-s) + 2.5%) calc(var(--brand-color-l) - 5%));
    }

    &:focus-visible {
        box-shadow: 0 0 0 var(--space-100) var(--white), 0 0 0 0.25em hsla(var(--brand-color-h) var(--brand-color-s) var(--brand-color-l) ~' / ' 90%);
    }

    &:active:not([disabled]) {
        --button-color-background: hsl(var(--brand-color-h) calc(var(--brand-color-s) + 5%) calc(var(--brand-color-l) - 10%));
    }

    .d-btn__icon {
      align-items: center;
      justify-content: center;
      width: 2em;
      height: 2em;
      margin-right: var(--space-400);
      margin-left: var(--space-300-negative);
      background-color: var(--white);
      border-radius: var(--br2);
    }

    .d-btn__label {
        flex: 1 auto;
    }
}

//  --  GOOGLE
.d-btn--google {
    --brand-color-h: 217;
    --brand-color-s: 89%;
    --brand-color-l: 61%;
}
//  --  OFFICE 365
.d-btn--o365 {
    --brand-color-h: 15;
    --brand-color-s: 99%;
    --brand-color-l: 46%;
}
//  --  LINKEDIN
.d-btn--linkedin {
    --brand-color-h: 197;
    --brand-color-s: 100%;
    --brand-color-l: 26%;
}

//  ============================================================================
//  @   BUTTON LOADER
//      Changes the button
//  ----------------------------------------------------------------------------
//  @@  BASE STYLE
//  ----------------------------------------------------------------------------
.d-btn-loading() {
    //  Disable clicking while the loader is in place
    pointer-events: none;

    //  Hide anything that was there before
    .d-btn__icon,
    .d-btn__label {
        opacity: 0;
        transition: opacity 50ms var(--ttf-in-out);
    }

    //  Show the loading animation
    &::before {
        position: absolute;
        width: var(--size-500);
        height: var(--size-500);
        border: var(--size-200) solid currentColor;
        border-left-color: transparent !important;
        border-radius: var(--br-circle);
        animation: d-loading-circle 900ms infinite linear;
        content: '';
    }
}

//  ============================================================================
//  $   BUTTON GROUP
//  ----------------------------------------------------------------------------
.d-btn-group {
    display: flex;

    &--start {
        justify-content: start;
    }

    &--end {
        justify-content: end;
    }

    &--space-between {
        justify-content: space-between;
    }
}
