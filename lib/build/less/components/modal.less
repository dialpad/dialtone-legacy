//@import (reference) '../utilities/spacing.less';

//
//  DIALTONE
//  COMPONENTS: MODALS
//
//  These are modal classes for Dialpad's design system Dialtone.
//  For further documentation of these and other classes,
//  visit https://dialpad.design/components/modals
//
//  TABLE OF CONTENTS
//  • BASE STYLES
//    - Wrapper
//    - Dialog
//    - Make them appear
//  • MODAL BACKGROUND
//  • HEADER
//  • CONTENT
//  • FOOTER
//  • TRANSITIONS
//
//  ============================================================================
//  $   BASE STYLES
//  ============================================================================
//  $$  WRAPPER
//  ----------------------------------------------------------------------------
.d-modal {
    //  Component CSS Vars
    //  ------------------------------------------------------------------------
    --modal-color-background: hsla(var(--black-900-hsl) ~' / ' 60%);
    --modal-dialog-padding: var(--space-600);
    --modal-dialog-color-background: var(--white);
    --modal-dialog-color-text: var(--fc-tertiary);
    --modal-header-color-text: var(--fc-secondary);

    position: fixed;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    z-index: var(--zi-hide);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: var(--space-600); // 32
    background-color: var(--modal-color-background);
    backface-visibility: hidden;
    visibility: hidden;
    opacity: 0;
    will-change: visibility, z-index, opacity;
}

.d-modal--transparent {
  //  Component CSS Vars
  //  ------------------------------------------------------------------------
  --modal-color-background: hsla(var(--black-900-hsl) ~' / ' 85%);

  position: fixed;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  z-index: var(--zi-hide);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: var(--space-600); // 32
  background-color: var(--d-bgc-transparent);
  backface-visibility: hidden;
  visibility: hidden;
  opacity: 0;
  will-change: visibility, z-index, opacity;
}

//  $$  MODAL DIALOG
//  ----------------------------------------------------------------------------
.d-modal__dialog {
  position: relative;
  z-index: var(--zi-hide);
  display: flex;
  flex-direction: column;
  gap: var(--space-500); //
  width: 100%;
  max-width: calc(var(--size-300) * 157); // 628
  max-height: 100%;
  padding: var(--modal-dialog-padding); // 32
  overflow-y: auto;
  color: var(--modal-dialog-color-text);
  font-size: var(--fs-200);
  line-height: var(--lh8);
  background-color: var(--modal-dialog-color-background);
  border-radius: var(--size-500);
  box-shadow: var(--bs-card);
  transform: translate3d(0, 30%, 0) scale3d(0.75, 0.75, 0.75);
  backface-visibility: hidden;
  visibility: hidden;
  opacity: 0;
  will-change: visibility, z-index, opacity, transform;
}

//  $$   MAKE THEM APPEAR
//  ----------------------------------------------------------------------------
.d-modal[aria-hidden='false'],
.d-modal[aria-hidden='false'] .d-modal__dialog,
.d-modal--transparent[aria-hidden='false'],
.d-modal--transparent[aria-hidden='false'] .d-modal__dialog {
  z-index: var(--zi-modal);
  transform: translate3d(0, 0, 0) scale3d(1, 1, 1);
  visibility: visible;
  opacity: 1;
}


//  ============================================================================
//  $   MODAL AREAS
//  ----------------------------------------------------------------------------
.d-modal__footer {
  --modal-footer-padding: calc(var(--space-300) * 6); // 24

  display: flex;
  flex-direction: row-reverse;
  gap: var(--space-400);
  align-items: center;
}


//  ============================================================================
//  $   TYPE STYLES
//  ============================================================================
//  $$  HEADER
//  ----------------------------------------------------------------------------
.d-modal__header {
  --modal-header-padding: calc(var(--space-300) * 6); // 24

  margin: 0 !important;
  color: var(--modal-header-color-text);
  font-weight: var(--fw-medium);
  font-size: var(--fs-400);
  line-height: var(--lh-200);
}

//  $$  CONTENT
//  ----------------------------------------------------------------------------
.d-modal__content {
  max-width: 75ch;
}


//  ============================================================================
//  $   BUTTONS
//  ----------------------------------------------------------------------------
.d-modal__close {
  position: absolute;
  top: var(--space-500); // 16
  right: var(--space-500); // 16
  margin: 0 !important;
}


//  ============================================================================
//  $   BANNERS
//  ----------------------------------------------------------------------------
.d-modal__banner {
  position: relative;
  box-sizing: border-box;
  width: 100%;
  max-width: calc(var(--size-300) * 157); // 628
  padding: var(--space-500) var(--space-600); // 4 32
  color: var(--fc-primary);
  font-size: var(--fs-200);
  line-height: var(--lh-300);
  background-color: var(--gold-100);
  border-radius: var(--br8) var(--br8) 0 0;

  &:not(.d-d-none) + .d-modal__dialog {
    border-top-left-radius: 0;
    border-top-right-radius: 0;
  }
}


//  ============================================================================
//  $   MODIFYING STYLES
//  ============================================================================
//  $$  FULL WIDTH
//  ----------------------------------------------------------------------------
.d-modal--full {
  --modal-dialog-padding: 0;

  padding: 0;
  overflow: hidden scroll;
  transform: unset !important;

  .d-modal__dialog {
    display: flex;
    flex-direction: column;
    max-width: unset;
    height: 100%;
    border-radius: 0;
    transform: unset !important;
  }

  .d-modal__header {
    padding: var(--space-600) var(--space-600) 0; // 32
  }

  .d-modal__content {
    padding-right: 0;
    padding-left: var(--space-600); // 32
  }

  .d-modal__footer {
    margin-top: auto !important;
    padding: 0 calc(var(--space-300) * 6) var(--space-600) var(--space-600); // 0 24 32 32
  }

  .d-modal__banner {
    max-width: unset;
    padding: calc(var(--space-300) * 3) var(--space-600); // 12 32
    border-radius: 0;
  }
}

// $$   SCROLLABLE
//  ----------------------------------------------------------------------------
.d-modal__dialog--scrollable {
  display: flex;
  flex-direction: column;
  overflow: hidden;

  .d-modal__content {
    overflow-y: auto;
  }
}

//  $$  DANGER
//  ----------------------------------------------------------------------------
.d-modal--danger {
  --modal-header-color-text: var(--fc-secondary);
}


//  ============================================================================
//  $   TRANSITIONS
//  ----------------------------------------------------------------------------
.d-modal--animate {
  z-index: var(--zi-hide) !important;
  backface-visibility: hidden !important;
  visibility: hidden !important;
  opacity: 0 !important;
}

.d-modal__dialog--animate {
  .d-modal--animate();

  transform: translate3d(0, 30%, 0) scale3d(0.75, 0.75, 0.75) !important;
}

.d-modal--animate-in,
 .d-modal__dialog--animate-in {
  transition:
    opacity 100ms var(--ttf-in-out) 10ms,
    z-index 0s 0s,
    visibility 0s 0s,
    transform 100ms var(--ttf-in-out) 10ms;

  @media (prefers-reduced-motion) {
    transition: none !important;
  }
}

.d-modal--animate-out {
  transition:
    opacity 100ms var(--ttf-in-out) 10ms,
    z-index 0s 200ms,
    visibility 0s 200ms,
    transform 100ms var(--ttf-in-out) 10ms;

  &.d-modal--full {
    transition:
      opacity 200ms var(--ttf-in-out) 0s,
      z-index 0s 200ms,
      visibility 0s 200ms;
  }

  @media (prefers-reduced-motion) {
    transition: none !important;
  }
}

.d-modal__dialog--animate-out {
  transition:
    opacity 200ms var(--ttf-in-out) 0s,
    z-index 0s 200ms,
    visibility 0s 200ms,
    transform 100ms var(--ttf-in-out) 0s;

  &.d-modal--full {
    transition:
      opacity 200ms var(--ttf-in-out) 0s,
      z-index 0s 200ms,
      visibility 0s 200ms;
  }

  @media (prefers-reduced-motion) {
    transition: none !important;
  }
}
