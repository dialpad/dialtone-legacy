//
//  DIALTONE
//  COMPONENTS: BUTTONS
//
//  These are button classes for Dialpad's design system Dialtone.
//  For further documentation of these and other classes,
//  visit https://dialpad.design/components/buttons
//
//  TABLE OF CONTENTS
//  • BASE STYLE
//  • VISUAL STYLES
//  • ALTERNATE STYLES
//  • SIZES
//
//  ============================================================================
//  $   BASE STYLE
//  ----------------------------------------------------------------------------
.d-btn {
    box-sizing: border-box;

    position: relative;
    display: inline-flex;
    justify-content: center;
    align-items: center;
    padding: calc(var(--su8) - var(--su1));

    border: 0.1rem solid transparent;
    border-radius: var(--base--corner-radius);
    background-color: hsla(var(--primary-color-h) var(--primary-color-s) var(--primary-color-l) ~" / " 0%);

    text-decoration: none;
    text-transform: inherit;
    font-family: inherit;
    font-size: var(--fs16);
    line-height: var(--lh-tight);
    color: var(--primary-color);

    cursor: pointer;
    transition-timing-function: @transition--cubic-inOut;
    transition-duration: 75ms;
    transition-property: background-color, border, box-shadow;

    user-select: none;
    fill: currentColor;

    //  --  STATES
    //  ------------------------------------------------------------------------
    &:hover,
    &:focus,
    &:active {
        color: var(--primary-color-hover);
        background-color: hsla(var(--primary-color-h) var(--primary-color-s) var(--primary-color-l) ~" / " 5%);
    }

    &:focus {
        outline: none;
        box-shadow: 0 0 0 var(--su4) var(--focus-ring);
    }
    &:active {
        border-color: hsla(var(--primary-color-h) var(--primary-color-s) var(--primary-color-l) ~" / " 50%);
        background-color: hsla(var(--primary-color-h) var(--primary-color-s) var(--primary-color-l) ~" / " 10%);
    }

    //  --  SIZES
    //  ------------------------------------------------------------------------
    &.d-btn--xs {
        padding: calc(var(--su4) - var(--su1)) calc(var(--su8) - var(--su1)); // Subtract border
        font-size: var(--fs12);
        line-height: 20/12;
    }
    &.d-btn--sm {
        padding: calc(var(--su6) - var(--su1)) calc(var(--su8) - var(--su1)); // Subtract border
        font-size: var(--fs14);
        line-height: 20/14;
    }
    &.d-btn--lg {
        padding: calc(var(--su12) - var(--su1)) var(--su12); // Subtract border
        border-radius: var(--br8);
        font-size: var(--fs20);
        line-height: 24/20;
    }
    &.d-btn--xl {
        padding: calc(var(--su12) - var(--su2)) calc(var(--su16) - var(--su1)); // Subtract border;
        border-radius: var(--br12);
        font-size: var(--fs24);
        line-height: 32/24;
    }

    //  --  LOADING
    //  ------------------------------------------------------------------------
    &.d-btn--loading {
        .d-btn-loading();
    }
}


//  ============================================================================
//  $   BUTTON LABEL
//  ----------------------------------------------------------------------------
.d-btn__label {
    display: inline-flex;
    justify-content: center;
    align-items: center;
}

//  $   BUTTON ICON
//  ----------------------------------------------------------------------------
.d-btn__icon {
    display: flex;
    margin: var(--sun4) var(--su4) var(--sun4) var(--sun2);
    width: 1em;
    height: 1em;

    &.d-btn__icon--last {
        order: 1;
        margin-left: var(--su4);
        margin-right: var(--sun2);
    }
}


//  ============================================================================
//  $   VISUAL STYLES
//  ============================================================================
//  $$  OUTLINED BUTTON
//  ----------------------------------------------------------------------------
.d-btn--outlined {
    border-color: var(--primary-color);
    background-color: hsla(var(--primary-color-h) var(--primary-color-s) var(--primary-color-l) ~" / " 0%);
    color: hsl(var(--primary-color-h) var(--primary-color-s) calc(var(--primary-color-l) + 5%));

    &:hover,
    &:active,
    &:focus {
        border-color: var(--primary-color-hover);
    }
    &:active {
        border-color: hsl(var(--primary-color-h) var(--primary-color-s) calc(var(--primary-color-l) + 5%));
    }
}

//  $$  FILLED BUTTON
//  ----------------------------------------------------------------------------
.d-btn--filled {
    color: var(--white);
    background-color: var(--primary-color);
    border-color: var(--primary-color);

    &:hover,
    &:active,
    &:focus {
        color: var(--white);
        background-color: var(--primary-color-hover);
        border-color: var(--primary-color-hover);
    }
    &:active {
        border-color: hsl(var(--primary-color-h) var(--primary-color-s) calc(var(--primary-color-l) + 10%));
        background-color: hsl(var(--primary-color-h) calc(var(--primary-color-s) + 15%) var(--primary-color-l));
    }
}

//  $$  MUTED BUTTON
//  ----------------------------------------------------------------------------
.d-btn--muted {
    --focus-ring: var(--focus-ring-muted);

    color: var(--black-800);
    background-color: hsla(var(--black-700-h) var(--black-700-s) var(--black-700-l) ~" / " 0%);

    &:hover,
    &:active,
    &:focus {
        color: var(--black-900);
        background-color: hsla(var(--black-800-h) var(--black-800-s) var(--black-800-l) ~" / " 7.5%);
    }
    &:active {
        border-color: hsla(var(--black-700-h) var(--black-700-s) var(--black-700-l) ~" / " 50%);
        background-color: hsla(var(--black-700-h) var(--black-700-s) var(--black-700-l) ~" / " 10%);
    }

    &.d-btn--outlined {
        border-color: var(--black-600);

        &:active {
            border-color: var(--black-700);
        }
    }
}

//  $$  DANGER BUTTON
//  ----------------------------------------------------------------------------
.d-btn--danger {
    --focus-ring: var(--focus-ring-danger);

    color: var(--error-color);
    background-color: hsla(var(--error-color-h) var(--error-color-s) var(--error-color-l) ~" / " 0%);
    border-color: hsla(var(--error-color-h) var(--error-color-s) var(--error-color-l) ~" / " 0%);

    &:hover,
    &:active,
    &:focus {
        color: var(--error-color-hover);
        background-color: hsla(var(--error-color-h) var(--error-color-s) var(--error-color-l) ~" / " 5%);
    }
    &:active {
        border-color: hsla(var(--error-color-h) var(--error-color-s) var(--error-color-l) ~" / " 50%);
        background-color: hsla(var(--error-color-h) var(--error-color-s) var(--error-color-l) ~" / " 10%);
    }

    &.d-btn--outlined {
        border-color: var(--error-color);

        &:active {
            border-color: var(--error-color-hover);
        }
    }

    &.d-btn--filled {
        color: var(--white);
        background-color: var(--error-color);
        border-color: var(--error-color);

        &:hover,
        &:active,
        &:focus {
            background-color: var(--error-color-hover);
            border-color: var(--error-color-hover);
        }
        &:active {
            background-color: hsl(var(--error-color-h) calc(var(--error-color-s) + 15%) var(--error-color-l));
            border-color: hsl(var(--error-color-h) var(--error-color-s) calc(var(--error-color-l) - 10%));
        }
    }
}

//  $$  INVERTED BUTTON
//  ----------------------------------------------------------------------------
//  --  Base, clear inverted button
.d-btn--inverted {
    --focus-ring: hsla(var(--primary-color-h) var(--primary-color-s) var(--primary-color-l) ~" / " 50%);

    border-color: hsla(var(--white-h) var(--white-s) var(--white-l) ~" / " 0%);
    background-color: hsla(var(--white-h) var(--white-s) var(--white-l) ~" / " 0%);
    color: var(--white);

    &:hover,
    &:active,
    &:focus {
        color: hsla(var(--white-h) var(--white-s) var(--white-l) ~" / " 90%);
        background-color: hsla(var(--primary-color-h) var(--primary-color-s) var(--primary-color-l) ~" / " 25%);
    }
    &:active {
        background-color: hsla(var(--primary-color-h) var(--primary-color-s) var(--primary-color-l) ~" / " 25%);
        border-color: hsla(var(--white-h) var(--white-s) var(--white-l) ~" / " 50%);
    }

    //  --  OUTLINED
    &.d-btn--outlined {
        border-color: hsla(var(--white-h) var(--white-s) var(--white-l) ~" / " 50%);

        &:hover {
            border-color: hsla(var(--white-h) var(--white-s) var(--white-l) ~" / " 75%);
        }
        &:active {
            border-color: var(--white);
        }
    }

    //  --  FILLED
    &.d-btn--filled {
        color: var(--primary-color);
        background-color: var(--white);

        &:hover,
        &:active,
        &:focus {
            color: hsl(var(--white-h) var(--white-s) calc(var(--white-l) - 10%));
            background-color: hsl(var(--primary-color-h) var(--primary-color-s) calc(var(--primary-color-l) + 25%));
            border-color: hsla(var(--white-h) var(--white-s) var(--white-l) ~" / " 75%);
        }
        &:active {
            color: hsl(var(--primary-color-h) var(--primary-color-s) calc(var(--primary-color-l) - 25%));
            border-color: var(--white);
        }
    }
}

//  $$  CIRCLE BUTTONS
//  ----------------------------------------------------------------------------
.d-btn--circle {
    padding: calc(var(--su8) + var(--su1));
    border-radius: var(--br-circle);
    transition-duration: 150ms;

    //  Reset icon margins
    .d-btn__icon {
        margin: unset;
    }

    //  If there's a label, hide it
    .d-btn__label {
        display: none;
    }

    //  Adjust padding based on sizes
    &.d-btn--xs {
        padding: var(--su6);
    }
    &.d-btn--sm {
        padding: var(--su8);
    }
    &.d-btn--lg {
        padding: calc(var(--su12) + var(--su1));
    }
    &.d-btn--xl {
        padding: calc(var(--su16) - var(--su2));
    }
}

//  $$  PILL BUTTONS
//  ----------------------------------------------------------------------------
.d-btn--pill {
    padding-right: var(--su16);
    padding-left: var(--su16);
    border-radius: @br-pill !important;

    //  Adjust padding based on sizes
    &.d-btn--xs {
        padding-right: var(--su8);
        padding-left: var(--su8);
    }
    &.d-btn--sm {
        padding-right: var(--su12);
        padding-left: var(--su12);
    }
    &.d-btn--lg {
        padding-right: var(--su16);
        padding-left: var(--su16);
    }
    &.d-btn--xl {
        padding-right: var(--su24);
        padding-left: var(--su24);
    }
}

//  $$  DISABLED STATES
//  ----------------------------------------------------------------------------
.d-btn {
    &[disabled],
    &.d-btn--disabled {
        opacity: 0.75;
        cursor: default;
        pointer-events: none;
        border-color: transparent;
        background-color: var(--black-100);
        color: var(--black-600);
        transition: none;
    }

    &.d-btn--outlined {
        &[disabled],
        &.d-btn--disabled {
            border-color: var(--black-200);
            background-color: transparent;
        }
    }

    &.d-btn--filled {
        &[disabled],
        &.d-btn--disabled {
            border-color: var(--black-300);
            background-color: var(--black-200);
        }
    }

    &.d-btn--inverted {
        //  --  DISABLED
        &[disabled],
        &.d-btn--disabled {
            color: hsla(var(--white-h) var(--white-s) var(--white-l) ~" / " 75%);
            border-color: transparent;
            background-color: hsla(var(--white-h) var(--white-s) var(--white-l) ~" / " 50%);
        }

        &.d-btn--outlined {
            &[disabled],
            &.d-btn--disabled {
                border-color: hsla(var(--white-h) var(--white-s) var(--white-l) ~" / " 50%);
                background-color: transparent;
            }
        }

        &.d-btn--filled {
            &[disabled],
            &.d-btn--disabled {
                border-color: hsla(var(--white-h) var(--white-s) var(--white-l) ~" / " 25%);
                background-color: hsla(var(--white-h) var(--white-s) var(--white-l) ~" / " 40%);
            }
        }
    }
}

//  $$  BRAND BUTTONS
//  ----------------------------------------------------------------------------
.d-btn--brand {
    display: flex;
    background-color: hsl(var(--brand-color-h) var(--brand-color-s) var(--brand-color-l));
    color: var(--white);

    &:hover,
    &:focus,
    &:active {
        background-color: hsl(var(--brand-color-h) calc(var(--brand-color-s) + 2.5%) calc(var(--brand-color-l) - 5%));
        color: hsla(var(--white-h) var(--white-s) var(--white-l) ~" / " 90%);
    }
    &:focus {
        --focus-ring: hsla(var(--brand-color-h) var(--brand-color-s) var(--brand-color-l) ~" / " 90%);
    }
    &:active {
        background-color: hsl(var(--brand-color-h) calc(var(--brand-color-s) + 5%) calc(var(--brand-color-l) - 10%));
    }

    .d-btn__icon {
        margin-left: var(--sun4);
        width: 2em;
        height: 2em;
        border-radius: var(--br2);
        background-color: var(--white);
    }
    .d-btn__label {
        flex: 1 auto;
    }
}

//  --  GOOGLE
.d-btn--google {
    --brand-color-h:    217;
    --brand-color-s:    89%;
    --brand-color-l:    61%;
}
//  --  OFFICE 365
.d-btn--o365 {
    --brand-color-h:    15;
    --brand-color-s:    99%;
    --brand-color-l:    46%;
}
//  --  LINKEDIN
.d-btn--linkedin {
    --brand-color-h:    197;
    --brand-color-s:    100%;
    --brand-color-l:    26%;
}

//  ============================================================================
//  @   BUTTON LOADER
//      Changes the button
//  ============================================================================
//  @@  BASE STYLE
//  ----------------------------------------------------------------------------
.d-btn-loading() {
    //  Disable clicking while the loader is in place
    pointer-events: none;

    //  Hide anything that was there before
    .d-btn__icon,
    .d-btn__label {
        opacity: 0;
        transition: opacity 50ms @transition--cubic-inOut;
    }

    //  Show the loading animation
    &:before {
        content: "";
        position: absolute;
        top: calc(50% - var(--su8));
        left: calc(50% - var(--su8));

        width: var(--su16);
        height: var(--su16);
        border-radius: var(--br-circle);
        border: var(--su2) solid currentColor;
        border-left-color: transparent !important;

        animation: d-loading-circle 900ms infinite linear;
    }
}
